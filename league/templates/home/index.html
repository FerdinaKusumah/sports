{% extends 'layouts/base.html' %}

{% block title %} Home {% endblock title %}

{% block content %}

<!--  table result  -->
<div class="row">
    <div class="col-sm-12">
        <div class="jumbotron">
            <h1>League sports result</h1>
        </div>
        <div class="col-sm-6">
            <h1>Source data</h1>
            <table class="league-table display nowrap" style="width:100%">
                <thead>
                <tr>
                    <th scope="col">Home</th>
                    <th scope="col">Home Score</th>
                    <th scope="col">Away</th>
                    <th scope="col">Away Score</th>
                    <th scope="col">Actions</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th scope="col">Home</th>
                    <th scope="col">Home Score</th>
                    <th scope="col">Away</th>
                    <th scope="col">Away Score</th>
                    <th scope="col">Actions</th>
                </tr>
                </tfoot>
            </table>
        </div>
        <div class="col-sm-6">
            <h1>Rank data</h1>
            <table class="rank-table display nowrap" style="width:100%">
                <thead>
                <tr>
                    <th scope="col">Rank</th>
                    <th scope="col">Team</th>
                    <th scope="col">Points</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th scope="col">Rank</th>
                    <th scope="col">Team</th>
                    <th scope="col">Points</th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {

        // prepare data table
        const table = $(".league-table").DataTable({
                ajax: {
                    method: "GET",
                    url: "http://localhost:8000/league"
                },
                columns: [
                    {data: "home"},
                    {data: "home_score"},
                    {data: "away"},
                    {data: "away_score"},
                    {
                        data: "id",
                        render: function (data, type, row, meta) {
                            const editBtn = `<a href="http://localhost:8000/league/${data}" class="btn xs btn-warning">Edit</a>`
                            const deleteBtn = `<a href="http://localhost:8000/league/${data}" class="btn xs btn-danger">Edit</a>`
                            return `${editBtn} | ${deleteBtn}`;
                        },
                    },
                ],
                processing: true,
        });
    });
</script>

{% endblock content %}
